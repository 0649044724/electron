From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Keeley Hammond <vertedinde@electronjs.org>
Date: Fri, 2 Jun 2023 12:13:48 -0700
Subject: chore: temporarily patch out ARC references

https://chromium-review.googlesource.com/c/chromium/src/+/4546398

Electron does not support ARC yet.

diff --git a/chrome/browser/extensions/global_shortcut_listener_mac.mm b/chrome/browser/extensions/global_shortcut_listener_mac.mm
index 03e01cf600c96f0a49983741954b5ac1cebba3a9..86a2667beba880219f666e2c4d7131599bb6e920 100644
--- a/chrome/browser/extensions/global_shortcut_listener_mac.mm
+++ b/chrome/browser/extensions/global_shortcut_listener_mac.mm
@@ -16,9 +16,9 @@
 #include "ui/events/event.h"
 #import "ui/events/keycodes/keyboard_code_conversion_mac.h"
 
-#if !defined(__has_feature) || !__has_feature(objc_arc)
-#error "This file requires ARC support."
-#endif
+// #if !defined(__has_feature) || !__has_feature(objc_arc)
+// #error "This file requires ARC support."
+// #endif
 
 using content::BrowserThread;
 using extensions::GlobalShortcutListenerMac;
diff --git a/chrome/browser/icon_loader_mac.mm b/chrome/browser/icon_loader_mac.mm
index f6acf1369c2ca37687b4f4cd6b3b5763a29c07e7..3443e1597339ebd291517da52c945ae15d1392ce 100644
--- a/chrome/browser/icon_loader_mac.mm
+++ b/chrome/browser/icon_loader_mac.mm
@@ -18,9 +18,9 @@
 #include "ui/gfx/image/image_skia.h"
 #include "ui/gfx/image/image_skia_util_mac.h"
 
-#if !defined(__has_feature) || !__has_feature(objc_arc)
-#error "This file requires ARC support."
-#endif
+// #if !defined(__has_feature) || !__has_feature(objc_arc)
+// #error "This file requires ARC support."
+// #endif
 
 // static
 IconLoader::IconGroup IconLoader::GroupForFilepath(
diff --git a/chrome/browser/media/webrtc/system_media_capture_permissions_mac.mm b/chrome/browser/media/webrtc/system_media_capture_permissions_mac.mm
index d9c0ffb9d3a775774545f2b0ddf35f4465a9f641..fbd51a74acfc7fec809fcd19706ae4017f0ece66 100644
--- a/chrome/browser/media/webrtc/system_media_capture_permissions_mac.mm
+++ b/chrome/browser/media/webrtc/system_media_capture_permissions_mac.mm
@@ -22,9 +22,9 @@
 #include "media/base/media_switches.h"
 #include "ui/base/cocoa/permissions_utils.h"
 
-#if !defined(__has_feature) || !__has_feature(objc_arc)
-#error "This file requires ARC support."
-#endif
+// #if !defined(__has_feature) || !__has_feature(objc_arc)
+// #error "This file requires ARC support."
+// #endif
 
 namespace system_media_permissions {
 
diff --git a/chrome/browser/media/webrtc/system_media_capture_permissions_stats_mac.mm b/chrome/browser/media/webrtc/system_media_capture_permissions_stats_mac.mm
index c8ab96a87f5e5203223bdbbf45f68b1d00226585..2c46f06d1dfd566f7e76b9d7291414c1dcdd06c6 100644
--- a/chrome/browser/media/webrtc/system_media_capture_permissions_stats_mac.mm
+++ b/chrome/browser/media/webrtc/system_media_capture_permissions_stats_mac.mm
@@ -10,9 +10,9 @@
 #include "components/prefs/pref_registry_simple.h"
 #include "components/prefs/pref_service.h"
 
-#if !defined(__has_feature) || !__has_feature(objc_arc)
-#error "This file requires ARC support."
-#endif
+// #if !defined(__has_feature) || !__has_feature(objc_arc)
+// #error "This file requires ARC support."
+// #endif
 
 namespace system_media_permissions {
 
diff --git a/chrome/browser/media/webrtc/window_icon_util_mac.mm b/chrome/browser/media/webrtc/window_icon_util_mac.mm
index b075efd130f996d01ce8204921832d02c476dfce..3b1933aa037610ca0ab9ebf969c80fea3ac0a5a3 100644
--- a/chrome/browser/media/webrtc/window_icon_util_mac.mm
+++ b/chrome/browser/media/webrtc/window_icon_util_mac.mm
@@ -11,9 +11,9 @@
 #include "third_party/libyuv/include/libyuv/convert_argb.h"
 #include "third_party/skia/include/core/SkBitmap.h"
 
-#if !defined(__has_feature) || !__has_feature(objc_arc)
-#error "This file requires ARC support."
-#endif
+// #if !defined(__has_feature) || !__has_feature(objc_arc)
+// #error "This file requires ARC support."
+// #endif
 
 gfx::ImageSkia GetWindowIcon(content::DesktopMediaID id) {
   DCHECK(id.type == content::DesktopMediaID::TYPE_WINDOW);
diff --git a/chrome/browser/platform_util_mac.mm b/chrome/browser/platform_util_mac.mm
index 43040bd84a447db69e0d619ac7088758d26a3daf..6ce4d50059f27ac961210051768fcf2ac0c5665c 100644
--- a/chrome/browser/platform_util_mac.mm
+++ b/chrome/browser/platform_util_mac.mm
@@ -22,9 +22,9 @@
 #include "ui/views/widget/widget.h"
 #include "url/gurl.h"
 
-#if !defined(__has_feature) || !__has_feature(objc_arc)
-#error "This file requires ARC support."
-#endif
+// #if !defined(__has_feature) || !__has_feature(objc_arc)
+// #error "This file requires ARC support."
+// #endif
 
 namespace platform_util {
 
diff --git a/chrome/browser/process_singleton_mac.mm b/chrome/browser/process_singleton_mac.mm
index c92f894bbc99718747bff420e1713198d0f7a2b8..032dfb8823918da92aabf6601e493b8bbf003003 100644
--- a/chrome/browser/process_singleton_mac.mm
+++ b/chrome/browser/process_singleton_mac.mm
@@ -9,9 +9,9 @@
 
 #include "base/mac/scoped_aedesc.h"
 
-#if !defined(__has_feature) || !__has_feature(objc_arc)
-#error "This file requires ARC support."
-#endif
+// #if !defined(__has_feature) || !__has_feature(objc_arc)
+// #error "This file requires ARC support."
+// #endif
 
 namespace {
 
